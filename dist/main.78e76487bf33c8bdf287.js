var mostazaWhatsaapPlugin;!function(){"use strict";var e,t={7562:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var o=n(7294),a=n(3935),s=(n(3948),n(1637),n(5893));const r=(0,o.createContext)();var i=e=>{let{children:t}=e;const[n,a]=(0,o.useState)(!1),[i,c]=(0,o.useState)({}),l={whatsappOpen:n,openWhatsapp:()=>{a(!n)},utms:i,processUtms:e=>{let t=new URLSearchParams(e),n={source:t.get("utm_source"),medium:t.get("utm_medium"),campaign:t.get("utm_campaign"),content:t.get("utm_content"),segment:t.get("utm_segment")};c(n)}};return(0,s.jsx)(r.Provider,{value:l,children:t})},c=()=>{const{whatsappOpen:e,openWhatsapp:t}=(0,o.useContext)(r);return(0,s.jsx)("div",{className:(n=e,n?"boton close":"boton"),id:"initial-button",children:(0,s.jsx)("button",{id:"boton-inicial",onClick:()=>t(),children:"Chatea con nosotrossss"})});var n};const l=(0,o.createContext)();var u=(e,t)=>{let{children:n}=e;const[a,r]=(0,o.useState)(sessionStorage.getItem("whatsappWidgetToken")),[i,c]=(0,o.useState)(""),u={token:a,setToken:r,fetchToken:async e=>{console.log("empezando la funcion fetchToken");const n=window.location.hostname,o={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify("grant_type=&username=".concat(n,"&password=").concat(t.password,"&scope=&client_id=&client_secret="))};console.log("voy a hacer la peticion de fetchToken");const a=await fetch("http://127.0.0.1:8000/marcas/token",o),s=await a.json();console.log("ya hice la peticion de fetchToken y hubo una respuesta"),a.ok?(r(s.access_token),sessionStorage.setItem("whatsappWidgetToken",s.access_token)):c(s.detail)}};return(0,s.jsx)(l.Provider,{value:u,children:n})},d=()=>{const{whatsappOpen:e,openWhatsapp:t,utms:n}=(0,o.useContext)(r),{token:a,fetchToken:i}=(0,o.useContext)(l),[c,u]=(0,o.useState)(""),[d,p]=(0,o.useState)(""),[h,m]=(0,o.useState)(""),[f,g]=(0,o.useState)(""),[x,v]=(0,o.useState)(!1);return(0,s.jsx)("form",{className:"form-whatsapp",onSubmit:async e=>{console.log("empezando la funcion de handleSubmit"),e.preventDefault(),(async()=>{console.log("empezando la funcion de sendWhatsappData"),await i();const e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("whatsappWidgetToken")},body:JSON.stringify({nombre:c,celular:d,tipo_contacto:h,...n})};console.log("voy a hacer la peticion de sendWhatsappData");const t=await fetch("http://127.0.0.1:8000/prospectos",e);console.log("ya hice la peticion de sendWhatsappData");const o=await t.json();t.ok?v(!0):g(o.detail)})(),window.open("https://api.whatsapp.com/send?phone=3102430382&text="+h,"_blank").focus()},children:(0,s.jsxs)("div",{className:(w=e,w?"formulario open":"formulario"),id:"form-global",children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("h3",{children:"Â¿Quieres contactar un asesor?"}),(0,s.jsx)("span",{id:"boton-close",onClick:()=>t(),children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,s.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]})})]}),(0,s.jsx)("p",{children:"Completa tus datos y te contactaremos un un experto"}),(0,s.jsx)("label",{htmlFor:"text_field",children:"Tu Nombre"}),(0,s.jsx)("input",{type:"text",id:"text_field",onChange:e=>u(e.target.value)}),(0,s.jsx)("label",{htmlFor:"number_field",children:"Tu Celular"}),(0,s.jsx)("input",{type:"text",id:"number_field",onChange:e=>p(e.target.value)}),(0,s.jsx)("label",{htmlFor:"select_field",children:"Quieres ayuda de un asesor para:"}),(0,s.jsxs)("select",{id:"select_field",onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{children:"Para hacer mi compra"}),(0,s.jsx)("option",{children:"Informacion sobre un peddio realizado"})]}),(0,s.jsx)("button",{children:"Contactar un asesor"})]})});var w},p=()=>{const{utms:e,processUtms:t}=(0,o.useContext)(r);return(0,o.useEffect)((()=>{if(sessionStorage.getItem("utmsConcatenated")){let e=sessionStorage.getItem("utmsConcatenated");t(e)}else{let e=window.location.search;sessionStorage.setItem("utmsConcatenated",e),t(e)}}),[]),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(d,{}),(0,s.jsx)(c,{})]})},h=e=>{a.render((0,s.jsx)(o.StrictMode,{children:(0,s.jsx)(u,{password:e,children:(0,s.jsx)(i,{children:(0,s.jsx)(p,{})})})}),document.getElementById("mostaza-whatsapp-plugin"))}}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=function(t,n,a,s){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],s=e[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(i=!1,s<r&&(r=s));if(i){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,a,s]},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={179:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,r=n[0],i=n[1],c=n[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(c)var u=c(o)}for(t&&t(n);l<r.length;l++)s=r[l],o.o(e,s)&&e[s]&&e[s][0](),e[r[l]]=0;return o.O(u)},n=self.webpackChunkmostazaWhatsaapPlugin=self.webpackChunkmostazaWhatsaapPlugin||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=o.O(void 0,[300],(function(){return o(7562)}));a=o.O(a),mostazaWhatsaapPlugin=a}();